# index

- 索引组织表

innodb中的表都是主键以索引的方式存储的，这样的表就是索引组织表，每个索引都会构成一个B+树

-    索引分类    

   主键索引（聚簇索引）：主键索引的叶子节点存的是行记录，非空，通过主键索引就能读取需要的行记录

   非主键索引（二级索引）： 非主键索引的叶子节点存的是主键的值，再通过主键索引进行查询对应的行记录，这中   检索的过程又叫做回表。

- 唯一索引 vs  普通索引

   读取： 唯一索引读取数据页时会比普通索引读少一次，因为是唯一，而普通索引需要多读下一条来判断符不符合。但是总体来说，区别不大。

  写入：唯一索引是没法用change buffer  因为需要读取数据页，判断值是否唯一。

  ​           普通索引，如果是在写多读少的情况，change buffer可以起到比较好的优化   若果是更新了马上查询出来 ，change buffer反而起不到优化的作用  本身还占用内存

  实际场景采用 普通索引结合change  buffer  ，对于数据量大的表的更新优化还是很明显的。

- 错误选择索引

  有时优化器会错误选择索引，优化器选择索引的重要参考维度 是一个索引的基础cardinality  也就是索引的区分度  这个基数是通过采用的方式统计的   inndb默认选择N个数据页，统计这些页中的基数，然后取得平均值，这个采用统计，在一定条件会自动触发，也可以通过  analyze table命令来触发这个采样统计

  另外还可以通过 force  index()来指定使用那个索引的方式

